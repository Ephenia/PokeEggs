"use strict";const buffContainer=document.getElementById("buff-cont");function resumeBuffs(){for(const e in player.buffHandler){const t=player.buffHandler[e],n=Math.max(0,1e3-(t.buffPause-t.lastTick));console.log(n),castBuff(+e,n,!0)}}function createBuff(e){if(!player.buffHandler.hasOwnProperty(e)&&itemData.hasOwnProperty(e)){const t=itemData[e];player.buffHandler=Object.assign({[e]:{duration:t.duration,time:t.duration,increment:t.countable,active:!1,buffStart:Date.now(),lastTick:null,buffPause:null}},player.buffHandler),castBuff(e)}else console.log("Buff is already either active or doesn't exist.")}function castBuff(e,t=0,n=!1){const a=player.buffHandler[e],f=itemData[e];let i;const u=document.createDocumentFragment(),r=document.createElement("div");r.classList.add("buff-icon"),r.setAttribute("buff-src",`${e}`),r.setAttribute("tooltip-src","item-buff"),r.addEventListener("contextmenu",(t=>{t.preventDefault(),f.voidable&&(cancelBuff(i,r,e),hideTooltip())}));const c=document.createElement("div");c.classList.add("buff-duration"),c.setAttribute("style",`height:${buffTimeVisual(a)}px;`);const o=document.createElement("div");o.classList.add("buff-counter"),o.textContent=a.time!==1/0?buffTimeSimple(a):"",o.setAttribute("style",""+(a.time<60?"color:#eeaf61":""));const l=document.createElement("img");if(l.classList.add("buff-item"),l.src=`assets/items/${f.src}.png`,r.appendChild(c),r.appendChild(o),r.appendChild(l),u.appendChild(r),buffContainer.appendChild(u),a.duration!==1/0){if(0!==a.time){function s(){const t=document.querySelector(`[buff-src="${e}"]`),n=t.querySelector(".buff-duration"),f=t.querySelector(".buff-counter");f.textContent=buffTimeSimple(a),f.setAttribute("style",""+(a.time<60?"color:#eeaf61":"")),n.setAttribute("style",`height:${buffTimeVisual(a)}px;`),a.time<6&&!t.classList.contains("buff-timeout")&&t.classList.add("buff-timeout"),console.log(a),a.time-=1,a.lastTick=Date.now(),-1===a.time&&cancelBuff(i,r,e)}setTimeout((()=>{s(),i=setInterval((()=>{s()}),1e3)}),t)}}else 408===e&&(player.radarHandler.active=!0,buffCounter(408,player.radarHandler.chain),renderPokeRadar())}function cancelBuff(e,t,n){delete player.buffHandler[n],t.remove(),clearInterval(e)}function buffCounter(e,t){document.querySelector(`[buff-src="${e}"]`).querySelector(".buff-counter").innerHTML=`${0!==t?t:""}`}function buffTimeSimple(e){return e.time>=60?Math.floor(e.time/60):e.time}function buffTimeVisual(e){const t=Math.abs(Math.ceil(e.time/e.duration*100)-100);return Math.ceil(t/100*36)}