"use strict";const partyCont=document.getElementById("party-cont");let partySlots;function renderParty(e=!1,t=-1){if(!isHidden(partyCont))if(e){disposeParty(!0);for(const e in player.party)s(+e)}else disposeParty(!1,t),s(t);function s(e){const t=player.party[e],r=new DocumentFragment;if(null!==t.isEgg){const n=document.createElement("div"),o=document.createElement("img");let a;a=t.isEgg?`assets/${eggDesign.includes(t.sprite)?`eggs/normal/${t.sprite}`:`eggs/${t.eggSprite}`}.png`:`assets/pkmn/${t.isShiny?"shiny":"normal"}/${t.sprite}.png`,o.src=a,n.appendChild(o),r.appendChild(n);const g=document.createElement("div");!t.isEgg&&t.isShiny&&g.classList.add("shiny-name"),g.innerText=t.isEgg?"Egg":`${t.name}`,r.appendChild(g);const i=document.createElement("div");i.classList.add("egg-progress"),i.innerHTML=t.isEgg?`${formNum(t.progress)} /<br> ${formNum(t.ehp)}`:formNum(t.exp),r.appendChild(i),partySlots[e].appendChild(r);const l=document.createElement("div");l.classList.add("egg-progress-bar"),l.setAttribute("style",eggProgStyle(t.isEgg,t.progress,t.ehp)),r.appendChild(l);const p=document.createElement("div");p.classList.add("egg-hatcher"),p.style.display=t.isEgg&&t.progress===t.ehp?"flex":"none",p.textContent="Hatch!",p.setAttribute("data-src",`${e}`),p.setAttribute("pkmn-menu","party"),p.addEventListener("click",(()=>{p.style.display="none",player.eggHandler[e]=null,convertEgg(t),disposeParty(!1,e),s(e),console.log(t),advanceChain(t.id,t.isShiny)})),r.appendChild(p)}else{const e=document.createElement("div");e.textContent="This party slot is empty.",r.appendChild(e)}partySlots[e].appendChild(r)}}function disposeParty(e=!1,t=-1){if(e)for(const e of partySlots)disposeElement(e);else disposeElement(partySlots[t])}function progressEgg(e,t=0){const s=player.party[e];let r;function n(e=!1,t){if(eggValidation(s,t)){if(e&&(s.progress=Math.min(s.ehp,s.progress+=randRange(200,250)),s.lastTick=Date.now()),!isHidden(partyCont)){const e=partyCont.querySelector(`[data-src="${t}"]`),r=e.querySelector(".egg-progress"),n=e.querySelector(".egg-progress-bar"),o=e.querySelector(".egg-hatcher");r.innerHTML=`${formNum(s.progress)} /<br> ${formNum(s.ehp)}`,n.setAttribute("style",eggProgStyle(!0,s.progress,s.ehp)),s.progress===s.ehp&&o.setAttribute("style","display:flex")}s.progress===s.ehp&&(clearInterval(r),Notify("eggReady"))}else clearInterval(r)}setTimeout((()=>{console.log(s.UUID),player.eggHandler[e]=s.UUID,s.frozen=!1,n(!(t>0),e),r=setInterval((()=>{n(!0,e)}),1e3)}),t)}function eggValidation(e,t){const s=player.eggHandler[t];return e.UUID===s&&null!==s&&!e.frozen}function resumeEggs(){for(const e in player.party){const t=player.party[e];if(t.isEgg&&t.progress!==t.ehp){const s=Math.max(0,1e3-(t.eggPause-t.lastTick));console.log(s),progressEgg(+e,s)}}}function eggProgStyle(e=!0,t,s){const r=e?500-5*Math.ceil(100-t/s*100):0;return console.log(r),`width:${r}px`}function pauseEggTimer(e=!1,t=-1){if(e)for(const e in player.party){const t=player.party[e];t.isEgg&&s(t,+e)}else s(player.party[t],t);function s(e,t){e.eggPause=Date.now(),player.eggHandler[t]=null,e.frozen=!0}}function convertEgg(e){e.isEgg=!1,delete e.lastTick,delete e.eggPause,delete e.ehp,delete e.progress,delete e.eggSprite}